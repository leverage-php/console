#!/bin/php
<?php

declare(strict_types=1);

require_once 'vendor/autoload.php';

use Leverage\CommandRunner\CommandRunner;
use Leverage\CommandRunner\Exception\CommandRunnerException;

if (!file_exists('commands.php')) {
    echo "You must define your commands in commands.php\n";
    exit;
}

$commands = require 'commands.php';

$runner = (new CommandRunner)
    ->registerCommands($commands)
;

try {
    exit($runner->run($argv));
} catch (CommandRunnerException $ex) {
    echo "{$ex->getMessage()}\n";
}
